# 11.1. 句柄

句柄是一种轻量级的标识符(ID)，用于引用特定的资产。你需要它们来使用你的资产，例如生成 2D 精灵或 3D 模型等实体，或者访问资产的数据。

句柄在 Rust 中的类型是 `Handle<T>`，其中 `T` 是资产类型。

你可以将句柄存储在你的实体组件或资源中。

句柄可以引用尚未加载的资产，这意味着你可以使用句柄来生成实体，而资产会在准备就绪时“突然出现”。

## 获取句柄

如果你正在从文件加载资产，`asset_server.load(…)` 调用将为你提供句柄。数据加载是在后台进行的，这意味着句柄最初将引用不可用的资产，实际数据将在稍后变得可用。

如果你正在[从代码创建自己的资产数据](./access_asset_data.md)，`assets.add(…)` 调用将为你提供句柄。

## 引用计数：强句柄和弱句柄

Bevy 会跟踪任何给定资产的句柄数量。Bevy 将在最后一个句柄被删除后自动卸载未使用的资产。

因此，创建指向同一资产的额外句柄需要你调用 `handle.clone()`。这使得操作显式化，以确保你知道在代码中创建额外句柄的所有位置。`.clone()` 操作是廉价的，所以不要担心性能（在大多数情况下）。

有两种句柄：“强”和“弱”。强资产被计数，弱句柄不被计数。默认情况下，句柄是强的。如果你想创建一个弱句柄，在现有句柄上使用`.clone_weak()`（而不是`.clone()`）。Bevy 可以在所有强句柄消失后卸载资产，即使你仍然持有一些弱句柄。

## 无类型句柄

Bevy 还具有 [`UntypedHandle`](https://docs.rs/bevy/latest/bevy/asset/enum.UntypedHandle.html) 类型。如果你需要能够引用任何资产，而不考虑资产类型，可以使用这种类型的句柄。

这允许你存储一个集合（如 `Vec` 或 `HashMap`），其中包含混合类型的资产。

你可以使用已有的句柄上的 `.load_untyped()` 来创建一个未类型化的句柄。

就像常规句柄一样，未类型化的句柄可以是强的或弱的。

你需要这样做来[访问资产数据](./access_asset_data.md)。

你可以用 `.typed::<T>()` 将未类型化的句柄转换为类型化的句柄，指定要使用的类型。